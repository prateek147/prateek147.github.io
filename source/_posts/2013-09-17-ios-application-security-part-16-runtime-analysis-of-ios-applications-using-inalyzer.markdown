---
layout: post
title: "iOS Application Security Part 16 â€“ Runtime Analysis of iOS Applications using iNalyzer"
date: 2013-09-17 13:12
comments: true
categories: [security]
---

<p>In the previous article, we looked at how we can perform static analysis of iOS Applications using iNalyzer. In this article, we will look at how we can use iNalyzer to perform runtime analysis of iOS applications. We can invoke methods during runtime, find the value of a particular instance variable at a particular time in the app, and basically do anything that we can do with Cycript.</p>

<p>In the last article, we were successfully able to generate the html files via Doxygen and open it up to view class information and other information about the app. For runtime analysis, we will be using the Firefox browser. The developer of this tool has personally recommended me to use Firefox as this may not work on other browsers. However, it seemed to be working fine for me on Chrome as well.</p>

<!-- more -->

<p><b>To open up the runtime interpreter, first of all open up the index.html file generated by Doxygen for the app that you want to analyze, then just double tap the left arrow key.</b></p>

<img src="/images/posts/ios16/1.png" width="1439" height="645" alt="1">

<p>You will see a console come up on the top as shown in the figure above where we can type commands. The first thing to do is to tell iNalyzer the ip address of your device, which in this case is 10.0.1.23. So let me just enter that on the box in the middle and press enter.</p>

<img src="/images/posts/ios16/2.png" width="1440" height="402" alt="2">

<p>Once the IP address has been set, make sure that the app that you want to analyze is open (i.e on foreground) on your device and your device is not in sleep mode. This is important because if your app is in the background or the device is in sleep mode, then your app is temporarily paused by the operating system and hence it is not possible to perform any kind of runtime analysis on the app.</p>

<p>Once the app is open, just type any command on the console, just like you would type on Cycript.</p>

<img src="/images/posts/ios16/3.png" width="1440" height="94" alt="3">

<p>As we can see, we get a response. We can now type any cycript command that we want here.</p>

<p>Let's hide the status bar from the app. We can do this with the command [[UIApplication sharedApplication] setStatusBarHidden:YES animated:YES];</p>

<img src="/images/posts/ios16/4.png" width="1440" height="62" alt="4">

<p>We see that we don't get a response. Its because the response type of this method is void.</p>

<img src="/images/posts/ios16/5.png" width="1440" height="66" alt="5">

<p>However, the status bar has been hidden in the app. Note that we no longer see the time on the top.</p>

<img src="/images/posts/ios16/6.PNG" width="320" height="480" alt="6">

<p>Similarly, we can also find the delegate class of this app.</p>

<img src="/images/posts/ios16/7.png" width="1440" height="76" alt="7">

<p>We can also set the application icon badge number. In this case, let us set it to 9000.</p>

<img src="/images/posts/ios16/8.png" width="950" height="73" alt="8">

<p>And it works.</p>

<img src="/images/posts/ios16/9.png" width="355" height="135" alt="9">

<p>Since this is exactly similar as having a cycript console, we can enter javascript code as well or any other command from Cycript's documentation. Here is a command i entered from the <a href="http://iphonedevwiki.net/index.php/Cycript_Tricks">Cycript tricks</a> page.</p>

<img src="/images/posts/ios16/10.png" width="1440" height="76" alt="10">

<p>Similarly, i can create a function using both Objective-C and javascript syntax. If you are not following cycript here, please refer to the earlier parts on this series that talk about Cycript and its usage in detail.</p>

<img src="/images/posts/ios16/11.png" width="1440" height="256" alt="11">

<p>I can then use that method whenever i like.</p>

<img src="/images/posts/ios16/12.png" width="1440" height="401" alt="12">

<p>In part 9 on this series, we had discussed about an application named Snoop-it. iNalyzer is very similar to Snoop-it. However both have their advantages and disadvantages. At the time of writing of the article on Snoop-it, it didn't allow for method swizzling, whereas iNalyzer does. Similarly, iNalyzer doesn't allow us to monitor api calls whereas Snoop-it does have that feature. Hence, both these applications have their pros and cons.</p>

<b>Conclusion</b>

<p>In this article, we looked at looked at how we can leverage the power of iNalyzer to perform runtime analysis of iOS applications. iNalyzer is a great tool in the arsenal for anyone interested in learning iOS application security as it makes our task much more easier and efficient.</p>

<b>References</b>

<ul>
     <li><p>iNalyzer</br><a href ="https://appsec-labs.com/iNalyzer">https://appsec-labs.com/iNalyzer</a></p>
     </li>
	
</ul>